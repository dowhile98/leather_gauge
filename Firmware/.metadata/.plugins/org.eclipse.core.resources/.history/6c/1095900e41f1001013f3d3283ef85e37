/**
 *
 */

//-------------------------------------------------------------------------------
// includes
//-------------------------------------------------------------------------------
#include "lgc.h"
#include "lgc_interface_printer.h"
#include "os_port.h"


//-------------------------------------------------------------------------------
// defines
//-------------------------------------------------------------------------------
#ifndef LGC_SENSOR_NUMBER
#define LGC_SENSOR_NUMBER 11
#endif
typedef struct
{
	uint16_t sensor[LGC_SENSOR_NUMBER];

}lgc_t;
//-------------------------------------------------------------------------------
// global variables
//-------------------------------------------------------------------------------
lgc_t data;
//-------------------------------------------------------------------------------
// private function prototype
//-------------------------------------------------------------------------------
static void lgc_encoder_callback(void);
//-------------------------------------------------------------------------------
// task definition
//-------------------------------------------------------------------------------
void lgc_main_task_entry(void *param)
{
	error_t err = NO_ERROR;

	/*encoder init*/
	lgc_module_encoder_init(lgc_encoder_callback);
    for (;;)
    {
    	for(uint8_t i = 0; i<LGC_SENSOR_NUMBER; i++)
    	{
    		err = lgc_modbus_read_holding_regs(i +1 , 45, &data.sensor[i], 1);

    		if( err!= NO_ERROR)
    		{
    			osDelayTask(50);
    		}
    	}
        /* code */
        osDelayTask(1000);
    }
}
//-------------------------------------------------------------------------------
// callbacks
//-------------------------------------------------------------------------------
static void lgc_encoder_callback(void)
{
	//set flag

}
//-------------------------------------------------------------------------------
// private function definition
//-------------------------------------------------------------------------------
